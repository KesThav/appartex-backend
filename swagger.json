{"openapi":"3.0.0","info":{"title":"Appartex : Une application de gestion pour propriétaires indépendants","version":"1.0.0","description":"Backend de Appartex, une application de gestion pour propriétaires indépendants"},"paths":{"/auth/register":{"post":{"summary":"Register as owner","operationId":"register","tags":["auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Owner"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"500":{"description":"Server error"}}}},"/auth/login":{"post":{"summary":"Login as owner","operationId":"login","tags":["auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"404":{"description":"Wrong credentials"},"500":{"description":"Server error"}}}},"/auth/tenant/login":{"post":{"summary":"Login as tenant","operationId":"loginastenant","tags":["auth"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Login"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"404":{"description":"Wrong credentials"},"500":{"description":"Server error"}}}},"/tenants":{"get":{"summary":"Return all tenants","operationId":"gettenants","tags":["tenant"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantPartial"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/tenants/{tenant_id}":{"get":{"summary":"Return one tenant","operationId":"getonetenant","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant_populate"}}}},"403":{"description":"Forbidden"},"404":{"description":"Tenant not found"},"500":{"description":"Server error"}}}},"/tenants/add":{"post":{"summary":"Create a tenant","operationId":"createtenant","tags":["tenant"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/tenants/update/{tenant_id}":{"put":{"summary":"Update a tenant","operationId":"updatetenant","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tenant"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Tenant not found"},"500":{"description":"Server error"}}}},"/tenants/delete/{tenant_id}":{"delete":{"summary":"Delete a tenant","operationId":"deletetenant","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Tenant not found"},"500":{"description":"Server error"}}}},"/tenants/contracts/{tenant_id}":{"get":{"summary":"Return tenant contracts","operationId":"gettenantcontract","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contract_populate"}}}},"403":{"description":"Forbidden"},"404":{"description":"No contract found"},"500":{"description":"Server error"}}}},"/tenants/bills/{tenant_id}":{"get":{"summary":"Return tenant bills","operationId":"gettenantbill","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Bill_populate"}}}},"403":{"description":"Forbidden"},"404":{"description":"No bill found"},"500":{"description":"Server error"}}}},"/tenants/tasks/{tenant_id}":{"get":{"summary":"Return tenant tasks","operationId":"gettenanttasks","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task_populate"}}}},"403":{"description":"Forbidden"},"404":{"description":"No Task found"},"500":{"description":"Server error"}}}},"/tenants/upload/{tenant_id}":{"put":{"summary":"Add file to tenant","operationId":"addfiletenant","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Tenant not found"},"500":{"description":"Server error"}}}},"/tenants/delete/file/{tenant_id}":{"put":{"summary":"delete file from tenant","operationId":"deletefiletenant","tags":["tenant"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"tenant_id","in":"path","required":true,"description":"the id of the tenant"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"string","example":"5fd32687e9ad210015711337"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Tenant not found"},"500":{"description":"Server error"}}}},"/buildings":{"get":{"summary":"Return all buildings","operationId":"getbuildings","tags":["building"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Building"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/buildings/{building_id}":{"get":{"summary":"Return one building","operationId":"getonebuilding","tags":["building"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"building_id","in":"path","required":true,"description":"the id of the building"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Building"}}}},"403":{"description":"Forbidden"},"404":{"description":"Building not found"},"500":{"description":"Server error"}}}},"/buildings/tenants/{building_id}":{"get":{"summary":"Return tenants from one building","operationId":"gettenantsonebuilding","tags":["building"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"building_id","in":"path","required":true,"description":"the id of the building"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TenantPartial"}}}},"403":{"description":"Forbidden"},"404":{"description":"Building not found"},"500":{"description":"Server error"}}}},"/buildings/add":{"post":{"summary":"Create a building","operationId":"createbuilding","tags":["building"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuildingPartial"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/buildings/update/{building_id}":{"put":{"summary":"Update a building","operationId":"updatebuilding","tags":["building"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"building_id","in":"path","required":true,"description":"the id of the building"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BuildingPartial"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Building not found"},"500":{"description":"Server error"}}}},"/buildings/delete/{building_id}":{"delete":{"summary":"Delete a building","operationId":"deletebuilding","tags":["building"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"building_id","in":"path","required":true,"description":"the id of the building"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Building not found"},"500":{"description":"Server error"}}}},"/appartments":{"get":{"summary":"Return all appartments","operationId":"getappartment","tags":["appartment"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Appartment_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/appartments/{appart_id}":{"get":{"summary":"Return one appartment","operationId":"getoneappart","tags":["appartment"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"appart_id","in":"path","required":true,"description":"the id of the appartment"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Appartment_populate_picture"}}}},"403":{"description":"Forbidden"},"404":{"description":"Appartment not found"},"500":{"description":"Server error"}}}},"/appartments/add":{"post":{"summary":"Create an appartment","operationId":"createappartment","tags":["appartment"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Appartment"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden / Complete all fields"},"500":{"description":"Server error"}}}},"/appartments/update/{appart_id}":{"put":{"summary":"Update an appartment","operationId":"updateappartment","tags":["appartment"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"appart_id","in":"path","required":true,"description":"the id of the appartment"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Appartment"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Tenant not found"},"500":{"description":"Server error"}}}},"/appartments/delete/{appart_id}":{"delete":{"summary":"Delete an appartment","operationId":"deleteappartment","tags":["appartment"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"appart_id","in":"path","required":true,"description":"the id of the appartment"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Appartment not found"},"500":{"description":"Server error"}}}},"/appartments/upload/{appart_id}":{"put":{"summary":"Add image to appartment","operationId":"addimageappartment","tags":["appartment"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"appart_id","in":"path","required":true,"description":"the id of the appartment"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"picture":{"type":"string","format":"binary"}},"required":["picture"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Appartment not found"},"500":{"description":"Server error"}}}},"/appartments/delete/file/{appart_id}":{"put":{"summary":"delete image from appartment","operationId":"deleteimageappartment","tags":["appartment"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"appart_id","in":"path","required":true,"description":"the id of the appartment"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"picture":{"type":"string","example":"5fd32687e9ad210015711337"}},"required":["picture"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Appartment not found"},"500":{"description":"Server error"}}}},"/contracts":{"get":{"summary":"Return all contracts","operationId":"getcontracts","tags":["contract"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contract_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/contracts/{contract_id}":{"get":{"summary":"Return one contract","operationId":"getonecontract","tags":["contract"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"contract_id","in":"path","required":true,"description":"the id of the contract"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contract_populate"}}}},"403":{"description":"Forbidden"},"404":{"description":"Contract not found"},"500":{"description":"Server error"}}}},"/contracts/add":{"post":{"summary":"Create a contract","operationId":"createcontract","tags":["contract"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contract"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/contracts/update/{contract_id}":{"put":{"summary":"Update a contract","operationId":"updatecontract","tags":["contract"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"contract_id","in":"path","required":true,"description":"the id of the contract"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contract"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Contract not found"},"500":{"description":"Server error"}}}},"/contracts/archive/{contract_id}":{"put":{"summary":"Archive a contract","operationId":"archivecontract","tags":["contract"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"contract_id","in":"path","required":true,"description":"the id of the contract"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Contract not found"},"500":{"description":"Server error"}}}},"/contracts/delete/{contract_id}":{"delete":{"summary":"Delete a contract","operationId":"deletecontract","tags":["contract"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"contract_id","in":"path","required":true,"description":"the id of the contract"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Contract not found"},"500":{"description":"Server error"}}}},"/contracts/upload/{contract_id}":{"put":{"summary":"Add file to contract","operationId":"addfilecontract","tags":["contract"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"contract_id","in":"path","required":true,"description":"the id of the contract"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Contract not found"},"500":{"description":"Server error"}}}},"/contracts/delete/file/{contract_id}":{"put":{"summary":"delete file from contract","operationId":"deletefilecontract","tags":["contract"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"contract_id","in":"path","required":true,"description":"the id of the contract"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"string","example":"5fd506d5900bbc0ac0d2d863"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Contract not found"},"500":{"description":"Server error"}}}},"/bills":{"get":{"summary":"Return all bills","operationId":"getbills","tags":["bill"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Bill_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/bills/{bill_id}":{"get":{"summary":"Return one bill","operationId":"getonebill","tags":["bill"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"bill_id","in":"path","required":true,"description":"the id of the bill"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Bill_populate_file"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/bills/add":{"post":{"summary":"Create a bill","operationId":"createbill","tags":["bill"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Bill"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/bills/update/{bill_id}":{"put":{"summary":"Update a status","operationId":"updatestatus","tags":["bill"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"bill_id","in":"path","required":true,"description":"the id of the bill"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Bill"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Bill not found"},"500":{"description":"Server error"}}}},"/bills/delete/{bill_id}":{"delete":{"summary":"Delete a bill","operationId":"deletebill","tags":["bill"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"bill_id","in":"path","required":true,"description":"the id of the bill"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Bill not found"},"500":{"description":"Server error"}}}},"/bills/upload/{bill_id}":{"put":{"summary":"Add file to bill","operationId":"addfilebill","tags":["bill"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"bill_id","in":"path","required":true,"description":"the id of the bill"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Bill not found"},"500":{"description":"Server error"}}}},"/bills/delete/file/{bill_id}":{"put":{"summary":"delete file from bill","operationId":"deletefilebill","tags":["bill"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"bill_id","in":"path","required":true,"description":"the id of the bill"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"id","example":"5fd3275ee9ad210015711349"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Tenant not found"},"500":{"description":"Server error"}}}},"/status":{"get":{"summary":"Return all status","operationId":"getstatus","tags":["status"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Status"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/status/{status_id}":{"get":{"summary":"Return one status","operationId":"getonestatut","tags":["status"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"status_id","in":"path","required":true,"description":"the id of the status"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Status"}}}},"403":{"description":"Forbidden"},"404":{"description":"Status not found"},"500":{"description":"Server error"}}}},"/status/add":{"post":{"summary":"Create a status","operationId":"createstatus","tags":["status"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusPartial"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/status/update/{status_id}":{"put":{"summary":"Update a status","operationId":"updatestatus","tags":["status"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"status_id","in":"path","required":true,"description":"the id of the status"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StatusPartial"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Status not found"},"500":{"description":"Server error"}}}},"/status/delete/{status_id}":{"delete":{"summary":"Delete a status","operationId":"deletestatus","tags":["status"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"status_id","in":"path","required":true,"description":"the id of the status"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Status not found"},"500":{"description":"Server error"}}}},"/history/bills":{"get":{"summary":"Return all bills histories","operationId":"getbillshistories","tags":["history"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillHistory"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/history/bills/{bill_id}":{"get":{"summary":"Return all histories of one bill","operationId":"getbillhistories","tags":["history"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"bill_id","in":"path","required":true,"description":"the id of the bill"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BillHistory"}}}},"403":{"description":"Forbidden"},"404":{"description":"Bill not found"},"500":{"description":"Server error"}}}},"/messages/sended":{"get":{"summary":"Return all sended messages","operationId":"getsendedmessages","tags":["message"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/messages/received":{"get":{"summary":"Return all received messages","operationId":"getreceivedmessages","tags":["message"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/messages/archived":{"get":{"summary":"Return all archive messages","operationId":"getarchivedmessages","tags":["message"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/messages/{message_id}":{"get":{"summary":"Return one message","operationId":"getonemessage","tags":["message"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"description":"the id of the message"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message_populate"}}}},"403":{"description":"Forbidden"},"404":{"description":"Building not found"},"500":{"description":"Server error"}}}},"/messages/add":{"post":{"summary":"Create a message","operationId":"createmessage","tags":["message"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden / Complete all fields"},"500":{"description":"Server error"}}}},"/messages/comment/add/{message_id}":{"post":{"summary":"Add a comment","operationId":"addcomment","tags":["message"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"description":"the id of the contract"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentPartial"}}}},"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Comment"}}}},"403":{"description":"Forbidden"},"404":{"description":"Contract not found"},"500":{"description":"Server error"}}}},"/messages/archive/{message_id}":{"put":{"summary":"Archive a message","operationId":"archivemessage","tags":["message"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"description":"the id of the message"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Message not found"},"500":{"description":"Server error"}}}},"/messages/unarchive/{message_id}":{"put":{"summary":"Unarchive a message","operationId":"unarchivemessage","tags":["message"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"description":"the id of the message"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Message not found"},"500":{"description":"Server error"}}}},"/messages/update/status/{message_id}":{"put":{"summary":"update message status","operationId":"updatemessagestatus","tags":["message"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"description":"the id of the message"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Message not found"},"500":{"description":"Server error"}}}},"/messages/delete/{message_id}":{"delete":{"summary":"Delete a message","operationId":"deletemessage","tags":["message"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"message_id","in":"path","required":true,"description":"the id of the message"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Message not found"},"500":{"description":"Server error"}}}},"/tasks":{"get":{"summary":"Return all tasks","operationId":"gettasks","tags":["task"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/tasks/add":{"post":{"summary":"Create a task","operationId":"createtask","tags":["task"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/tasks/update/{task_id}":{"put":{"summary":"Update a task","operationId":"updatetask","tags":["task"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"description":"the id of the task"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Task"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Task not found"},"500":{"description":"Server error"}}}},"/tasks/delete/{task_id}":{"delete":{"summary":"Delete a task","operationId":"deletetask","tags":["task"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"description":"the id of the task"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"task not found"},"500":{"description":"Server error"}}}},"/history/tasks":{"get":{"summary":"Return all tasks histories","operationId":"gettasksshistories","tags":["history"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskHistory"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/history/tasks/{task_id}":{"get":{"summary":"Return all histories of one task","operationId":"gettaskhistories","tags":["history"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"task_id","in":"path","required":true,"description":"the id of the task"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TaskHistory"}}}},"403":{"description":"Forbidden"},"404":{"description":"Task not found"},"500":{"description":"Server error"}}}},"/repairs":{"get":{"summary":"Return all repairs","operationId":"getrepairs","tags":["repair"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Repair_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/repairs/{repair_id}":{"get":{"summary":"Return one repair","operationId":"getonerepair","tags":["repair"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"repair_id","in":"path","required":true,"description":"the id of the repair"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Repair_populate"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/repairs/add":{"post":{"summary":"Create a repair","operationId":"createrepair","tags":["repair"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Repair"}}}},"responses":{"200":{"description":"Success"},"400":{"description":"Field missing"},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/repairs/update/{repair_id}":{"put":{"summary":"Update a repair","operationId":"updaterepair","tags":["repair"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"repair_id","in":"path","required":true,"description":"the id of the repair"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Repair"}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Repair not found"},"500":{"description":"Server error"}}}},"/repairs/delete/{repair_id}":{"delete":{"summary":"Delete a repair","operationId":"deleterepair","tags":["repair"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"repair_id","in":"path","required":true,"description":"the id of the repair"}],"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Repair not found"},"500":{"description":"Server error"}}}},"/repairs/upload/{repair_id}":{"put":{"summary":"Add file to repair","operationId":"addfilerepair","tags":["repair"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"repair_id","in":"path","required":true,"description":"the id of the repair"}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Repair not found"},"500":{"description":"Server error"}}}},"/repairs/delete/file/{repair_id}":{"put":{"summary":"delete file from repair","operationId":"deletefilerepair","tags":["repair"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"repair_id","in":"path","required":true,"description":"the id of the repair"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"string","example":"file/random-file.pdf"}},"required":["file"]}}}},"responses":{"200":{"description":"Success"},"403":{"description":"Forbidden"},"404":{"description":"Repair not found"},"500":{"description":"Server error"}}}},"/history/repairs":{"get":{"summary":"Return all repairs histories","operationId":"getrepairshistories","tags":["history"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepairHistory"}}}},"403":{"description":"Forbidden"},"500":{"description":"Server error"}}}},"/history/repairs/{repair_id}":{"get":{"summary":"Return all histories of one repair","operationId":"getrepairhistories","tags":["history"],"security":[{"bearerAuth":[]}],"parameters":[{"name":"repair_id","in":"path","required":true,"description":"the id of the repair"}],"responses":{"200":{"description":"Success","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RepairHistory"}}}},"403":{"description":"Forbidden"},"404":{"description":"Repair not found"},"500":{"description":"Server error"}}}}},"components":{"schemas":{"Owner":{"properties":{"name":{"type":"String","example":"Jean"},"lastname":{"type":"string","example":"Paul"},"email":{"type":"String","example":"Jean@paul.com"},"password":{"type":"String","minimum":6,"example":"1a3b5c"}},"required":["name","lastname","email","password"]},"Login":{"properties":{"email":{"type":"String","example":"Jean@paul.com"},"password":{"type":"String","minimum":6,"example":"1a3b5c"}},"required":["name","lastname","email","password"]},"Tenant":{"properties":{"name":{"type":"String","example":"Patrick"},"lastname":{"type":"string","example":"Bruel"},"email":{"type":"String","example":"Jean@paul.com"},"password":{"type":"String","minimum":6,"example":"1a3b5c"},"status":{"type":"String","default":"Actif","example":"Actif"},"dateofbirth":{"type":"Date","example":"1996-02-17T00:00:00.000Z"},"file":{"type":"id","example":"5fd3273ce9ad210015711348"}},"required":["name","lastname","email","password"]},"TenantPartial":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"name":{"type":"String","example":"Patrick"},"lastname":{"type":"string","example":"Bruel"},"email":{"type":"String","example":"Jean@paul.com"},"status":{"type":"String","default":"Actif","example":"Actif"},"dateofbirth":{"type":"Date","example":"1996-02-17T00:00:00.000Z"},"file":{"type":"id","example":"5fd3273ce9ad210015711348"}},"required":["name","lastname","email"]},"Tenant_populate":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"name":{"type":"String","example":"Patrick"},"lastname":{"type":"string","example":"Bruel"},"email":{"type":"String","example":"Jean@paul.com"},"password":{"type":"String","minimum":6,"example":"1a3b5c"},"status":{"type":"String","default":"Actif","example":"Actif"},"dateofbirth":{"type":"Date","example":"1996-02-17T00:00:00.000Z"},"file":{"$ref":"#/components/schemas/File"}},"required":["name","lastname","email","password"]},"BuildingPartial":{"properties":{"numberofAppart":{"type":"Number","example":14},"adress":{"type":"string","example":"Rte de Pérolles 21"},"postalcode":{"type":"Number","minimum":4,"maximum":4,"example":1700},"city":{"type":"String","example":"Fribourg"}},"required":["adress","postalcode","city"]},"Building":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"numberofAppart":{"type":"Number","example":14},"adress":{"type":"string","example":"Rte de Pérolles 21"},"postalcode":{"type":"Number","minimum":4,"maximum":4,"example":1700},"city":{"type":"String","example":"Fribourg"}},"required":["adress","postalcode","city"]},"Appartment_populate":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"size":{"type":"Number","example":14},"adress":{"type":"string","example":"Rte de Pérolles 21"},"postalcode":{"type":"Number","example":1700},"city":{"type":"string","example":"Fribourg"},"building":{"$ref":"#/components/schemas/Building"},"picture":{"type":"id","example":"5fd506d5900bbc0ac0d2d863"}},"required":["size"]},"Appartment":{"properties":{"size":{"type":"Number","example":14},"adress":{"type":"string","example":"Rte de Pérolles 21"},"postalcode":{"type":"Number","example":1700},"city":{"type":"string","example":"Fribourg"},"building":{"type":"id","example":"5fd506d5900bbc0ac0d2d863"},"picture":{"type":"id","example":"5fd506d5900bbc0ac0d2d863"}},"required":["size"]},"Appartment_populate_picture":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"size":{"type":"Number","example":14},"adress":{"type":"string","example":"Rte de Pérolles 21"},"postalcode":{"type":"Number","example":1700},"city":{"type":"string","example":"Fribourg"},"building":{"$ref":"#/components/schemas/Building"},"picture":{"$ref":"#/components/schemas/File"}},"required":["size"]},"File":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"data":{"type":"Buffer","example":[123,234,245]},"contentType":{"type":"string","example":"image/jpeg"},"name":{"type":"string","example":"5507334-1765822b13e.jpg"}}},"Contract":{"properties":{"charge":{"type":"Number","example":1750},"rent":{"type":"Number","example":457},"tenant":{"type":"id","example":"507f1f77bcf86cd799439011"},"appartmentid":{"type":"id","example":"5f954d4c94a4981bc4284277"},"other":{"type":"String","example":"Two rent paid in advance"},"status":{"type":"String","example":"Actif","default":"Actif"},"file":{"type":"id","example":"5f954d4c94a4981bc4284277"}},"required":["charge","rent","tenant"]},"Contract_populate":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"charge":{"type":"Number","example":1750},"rent":{"type":"Number","example":457},"tenant":{"$ref":"#/components/schemas/TenantPartial"},"appartmentid":{"$ref":"#/components/schemas/Appartment_populate"},"other":{"type":"String","example":"Two rent paid in advance"},"status":{"type":"String","example":"Actif","default":"Actif"},"file":{"$ref":"#/components/schemas/File"}},"required":["charge","rent","tenant"]},"Bill":{"properties":{"tenant":{"type":"id","example":"507f1f77bcf86cd799439011"},"reference":{"type":"String","example":"DC-134"},"endDate":{"type":"Date","example":"2021-02-17T00:00:00.000Z"},"amount":{"type":"Number","example":1994},"reason":{"type":"String","example":"Rent"},"status":{"type":"id","example":"507f1f77bcf86cd799439011"},"file":{"type":"id","example":"5f954d4c94a4981bc4284277"}},"required":["tenant","endDate","amount","reason"]},"Bill_populate":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"tenant":{"$ref":"#/components/schemas/TenantPartial"},"reference":{"type":"String","example":"DC-134"},"endDate":{"type":"Date","example":"2021-02-17T00:00:00.000Z"},"amount":{"type":"Number","example":1994},"reason":{"type":"String","example":"Rent"},"status":{"$ref":"#/components/schemas/Status"},"file":{"type":"id","example":"507f1f77bcf86cd799439011"}},"required":["tenant","endDate","amount","reason"]},"Bill_populate_file":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"tenant":{"$ref":"#/components/schemas/TenantPartial"},"reference":{"type":"String","example":"DC-134"},"endDate":{"type":"Date","example":"2021-02-17T00:00:00.000Z"},"amount":{"type":"Number","example":1994},"reason":{"type":"String","example":"Rent"},"status":{"$ref":"#/components/schemas/Status"},"file":{"$ref":"#/components/schemas/File"}},"required":["tenant","endDate","amount","reason"]},"StatusPartial":{"properties":{"name":{"type":"String","example":"Actif"}},"required":["name"]},"Status":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"name":{"type":"String","example":"Actif"}},"required":["name"]},"BillHistory":{"properties":{"billid":{"type":"id","example":"5f9820a2d32a1820dc695040"},"status":{"$ref":"#/components/schemas/Status"}},"required":["billid","status"]},"Message":{"properties":{"sendedTo":{"type":"Array","items":"id","example":"507f1f77bcf86cd799439011"},"sendedToType":{"type":"String","enum":["Owner","Tenant"],"summary":"ajoute la ref vers le bon schema"},"content":{"type":"String","example":"Welcome to Fribourg"},"status":{"type":"String","default":"Non lu","example":"Non lu"},"title":{"type":"String","example":"Greeting"},"createdByType":{"type":"String","enum":["Owner","Tenant"],"summary":"ajoute la ref vers le bon schema"},"comments":{"type":"id"}},"required":["sendedTo","sendedToType","content","title","createdByType"]},"Message_populate":{"properties":{"sendedTo":{"type":"Array","items":"id","example":"507f1f77bcf86cd799439011"},"sendedToType":{"type":"String","enum":["Owner","Tenant"],"summary":"ajoute la ref vers le bon schema"},"content":{"type":"String","example":"Welcome to Fribourg"},"status":{"type":"String","default":"Non lu","example":"Non lu"},"title":{"type":"String","example":"Greeting"},"createdByType":{"type":"String","enum":["Owner","Tenant"],"summary":"ajoute la ref vers le bon schema"},"comments":{"$ref":"#/components/schemas/Comment"}},"required":["sendedTo","sendedToType","content","title","createdByType"]},"CommentPartial":{"properties":{"content":{"type":"String","example":"Hello World"},"createdByType":{"type":"String","enum":["Owner","Tenant"],"summary":"ajoute la ref vers le bon schema"}},"required":["content","createdByType"]},"Comment":{"properties":{"_id":{"type":"id","example":"507f1f77bcf86cd799439011"},"content":{"type":"String","example":"Hello World"},"createdByType":{"type":"String","enum":["Owner","Tenant"],"summary":"ajoute la ref vers le bon schema"}},"required":["content","createdByType"]},"Task":{"properties":{"content":{"type":"String","example":"Cleaning"},"title":{"type":"String","example":"New tenant"},"startDate":{"type":"Date","example":"2020-10-22T00:00:00.000Z"},"endDate":{"type":"Date","example":"2020-10-23T00:00:00.000Z"},"status":{"type":"id","default":"5f8c8096c7289130403d7e16"},"messageid":{"type":"id","example":"5f8c8096c7289130403d7e16"}},"required":["content","title","startDate","endDate","status"]},"Task_populate":{"properties":{"_id":{"type":"id","example":"5fd3275ee9ad210015711349"},"content":{"type":"String","example":"Cleaning"},"title":{"type":"String","example":"New tenant"},"startDate":{"type":"Date","example":"2020-10-22T00:00:00.000Z"},"endDate":{"type":"Date","example":"2020-10-23T00:00:00.000Z"},"status":{"$ref":"#/components/schemas/Status"},"messageid":{"type":"id","example":"5f8c8096c7289130403d7e16"}},"required":["content","title","startDate","endDate","status"]},"TaskHistory":{"properties":{"taskid":{"type":"id","example":"5f9820a2d32a1820dc695040"},"status":{"$ref":"#/components/schemas/Status"}},"required":["taskid","status"]},"Repair":{"properties":{"status":{"type":"id","example":"507f1f77bcf86cd799439011"},"reason":{"type":"String","example":"DC-134"},"amount":{"type":"Number","example":1994},"taskid":{"type":"id","example":"507f1f77bcf86cd799439011"}},"required":["status","taskid","amount","reason"]},"Repair_populate":{"properties":{"status":{"$ref":"#/components/schemas/Status"},"reason":{"type":"String","example":"DC-134"},"amount":{"type":"Number","example":1994},"taskid":{"$ref":"#/components/schemas/Task_populate"}},"required":["status","taskid","amount","reason"]},"RepairHistory":{"properties":{"repairid":{"type":"id","example":"5f9820a2d32a1820dc695040"},"status":{"$ref":"#/components/schemas/Status"}},"required":["repairid","status"]}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"tags":[]}